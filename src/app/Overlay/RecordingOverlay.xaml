<Window x:Class="VoicePaste.Overlay.RecordingOverlay"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="VoicePaste Recording" 
        Width="320" 
        Height="92"
        WindowStyle="None"
        ResizeMode="NoResize"
        Topmost="True"
        ShowInTaskbar="False"
        ShowActivated="False"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStartupLocation="Manual">
    
    <Border Background="#E0FFFFFF" 
            BorderBrush="#999999" 
            BorderThickness="1" 
            CornerRadius="8"
            Padding="16">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Recording indicator and timer -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center">
                <Ellipse x:Name="RecordingIndicator" 
                         Width="12" 
                         Height="12" 
                         Fill="Red" 
                         Margin="0,0,8,0"
                         VerticalAlignment="Center">
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                   From="1.0" To="0.3" Duration="0:0:0.8"
                                                   AutoReverse="True"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>
                
                <TextBlock x:Name="StateText" 
                          Text="Recording" 
                          FontSize="16" 
                          FontWeight="SemiBold"
                          VerticalAlignment="Center"/>
                
                <TextBlock x:Name="TimerText" 
                          Text="00:00" 
                          FontSize="16" 
                          FontWeight="SemiBold"
                          Margin="16,0,0,0"
                          Width="48"
                          TextAlignment="Left"
                          VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Audio level meter -->
            <Border x:Name="AudioLevelMeter"
                    Grid.Row="1" 
                    Margin="0,10,0,0"
                    Height="14" 
                    BorderBrush="#CCCCCC" 
                    BorderThickness="1"
                    Background="#F5F5F5"
                    CornerRadius="4">
                <Rectangle x:Name="AudioLevelBar" 
                          Fill="#FF8C00" 
                          HorizontalAlignment="Left"
                          RadiusX="4"
                          RadiusY="4"/>
            </Border>



            <!-- Transcribing overlay (initially hidden) -->
            <Grid x:Name="TranscribingOverlay" 
                  Grid.RowSpan="2" 
                  Background="Transparent"
                  Visibility="Collapsed"
                  Width="320"
                  Height="92"
                  Margin="-16,-8,-16,-16">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <!-- Wave Spinner -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,12">
                        <Rectangle x:Name="SpinnerBar1" Width="6" Height="40" Fill="#FF8C00" Margin="0,0,1,0">
                            <Rectangle.RenderTransform>
                                <ScaleTransform ScaleY="0.4" CenterY="20"/>
                            </Rectangle.RenderTransform>
                            <Rectangle.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard RepeatBehavior="Forever">
                                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                           From="0.4" To="1.0" Duration="0:0:0.48"
                                                           AutoReverse="True" RepeatBehavior="Forever"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Rectangle.Triggers>
                        </Rectangle>
                        
                        <Rectangle x:Name="SpinnerBar2" Width="6" Height="40" Fill="#FF8C00" Margin="1,0,1,0">
                            <Rectangle.RenderTransform>
                                <ScaleTransform ScaleY="0.4" CenterY="20"/>
                            </Rectangle.RenderTransform>
                            <Rectangle.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard RepeatBehavior="Forever">
                                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                           From="0.4" To="1.0" Duration="0:0:0.48"
                                                           BeginTime="0:0:0.2"
                                                           AutoReverse="True" RepeatBehavior="Forever"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Rectangle.Triggers>
                        </Rectangle>
                        
                        <Rectangle x:Name="SpinnerBar3" Width="6" Height="40" Fill="#FF8C00" Margin="1,0,1,0">
                            <Rectangle.RenderTransform>
                                <ScaleTransform ScaleY="0.4" CenterY="20"/>
                            </Rectangle.RenderTransform>
                            <Rectangle.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard RepeatBehavior="Forever">
                                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                           From="0.4" To="1.0" Duration="0:0:0.48"
                                                           BeginTime="0:0:0.4"
                                                           AutoReverse="True" RepeatBehavior="Forever"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Rectangle.Triggers>
                        </Rectangle>
                        
                        <Rectangle x:Name="SpinnerBar4" Width="6" Height="40" Fill="#FF8C00" Margin="1,0,1,0">
                            <Rectangle.RenderTransform>
                                <ScaleTransform ScaleY="0.4" CenterY="20"/>
                            </Rectangle.RenderTransform>
                            <Rectangle.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard RepeatBehavior="Forever">
                                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                           From="0.4" To="1.0" Duration="0:0:0.48"
                                                           BeginTime="0:0:0.6"
                                                           AutoReverse="True" RepeatBehavior="Forever"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Rectangle.Triggers>
                        </Rectangle>
                        
                        <Rectangle x:Name="SpinnerBar5" Width="6" Height="40" Fill="#FF8C00" Margin="1,0,0,0">
                            <Rectangle.RenderTransform>
                                <ScaleTransform ScaleY="0.4" CenterY="20"/>
                            </Rectangle.RenderTransform>
                            <Rectangle.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard RepeatBehavior="Forever">
                                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                           From="0.4" To="1.0" Duration="0:0:0.48"
                                                           BeginTime="0:0:0.8"
                                                           AutoReverse="True" RepeatBehavior="Forever"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Rectangle.Triggers>
                        </Rectangle>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>
