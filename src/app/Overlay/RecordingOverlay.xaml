<Window x:Class="VoicePaste.Overlay.RecordingOverlay"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="VoicePaste Recording" 
        Width="320" 
        Height="92"
        WindowStyle="None"
        ResizeMode="NoResize"
        Topmost="True"
        ShowInTaskbar="False"
        ShowActivated="False"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStartupLocation="Manual">
    
    <Border Background="#E0FFFFFF" 
            BorderBrush="#999999" 
            BorderThickness="1" 
            CornerRadius="8"
            Padding="16">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Recording indicator and timer -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center">
                <Ellipse x:Name="RecordingIndicator" 
                         Width="12" 
                         Height="12" 
                         Fill="Red" 
                         Margin="0,0,8,0"
                         VerticalAlignment="Center">
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                   From="1.0" To="0.3" Duration="0:0:0.8"
                                                   AutoReverse="True"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>
                
                <TextBlock x:Name="StateText" 
                          Text="Recording" 
                          FontSize="16" 
                          FontWeight="SemiBold"
                          VerticalAlignment="Center"/>
                
                <TextBlock x:Name="TimerText" 
                          Text="00:00" 
                          FontSize="16" 
                          FontWeight="SemiBold"
                          Margin="16,0,0,0"
                          VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Audio level meter -->
            <Border Grid.Row="1" 
                    Margin="0,10,0,0"
                    Height="20" 
                    BorderBrush="#CCCCCC" 
                    BorderThickness="1"
                    Background="#F5F5F5"
                    CornerRadius="4">
                <Rectangle x:Name="AudioLevelBar" 
                          Fill="#4CAF50" 
                          HorizontalAlignment="Left"
                          RadiusX="4"
                          RadiusY="4"/>
            </Border>



            <!-- Transcribing overlay (initially hidden) -->
            <Grid x:Name="TranscribingOverlay" 
                  Grid.RowSpan="2" 
                  Background="#F0FFFFFF"
                  Visibility="Collapsed">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <!-- Spinner -->
                    <Grid Width="48" Height="48" Margin="0,0,0,12">
                        <Ellipse Stroke="#2196F3" 
                                StrokeThickness="4" 
                                StrokeDashArray="12,4"
                                Width="48" 
                                Height="48">
                            <Ellipse.RenderTransform>
                                <RotateTransform x:Name="SpinnerRotation" CenterX="24" CenterY="24"/>
                            </Ellipse.RenderTransform>
                            <Ellipse.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard RepeatBehavior="Forever">
                                            <DoubleAnimation Storyboard.TargetName="SpinnerRotation"
                                                           Storyboard.TargetProperty="Angle"
                                                           From="0" To="360" Duration="0:0:1"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Ellipse.Triggers>
                        </Ellipse>
                    </Grid>
                    
                    <TextBlock Text="Transcribing..." 
                              FontSize="14" 
                              FontWeight="SemiBold"
                              HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>
